(this.webpackJsonppomodoro=this.webpackJsonppomodoro||[]).push([[0],{70:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var o=n(0),i=n.n(o),c=n(10),s=n.n(c),r=(n(70),n(43)),a=n.n(r),u=n(47),l=n(13),j=n(103),m=n(121),d=n(117),b=n(112),O=n(107),f=n(114),p=n(120),g=n(118),x=n(48),v=n(49),h=n(55),y=n(54),T=new(function(e){Object(h.a)(n,e);var t=Object(y.a)(n);function n(){var e;return Object(v.a)(this,n),(e=t.call(this,"settingsDB")).settings=void 0,e.version(1).stores({settings:"++id"}),e}return n}(n(42).default)),k=n(50),C=n(109),S=n(110),M=n(111),N=n(105),B=n(44),I=n(4),w=Object(j.a)({in_circle:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"}}),P=function(e){var t=w();return Object(I.jsx)(p.a,{className:t.in_circle,children:Object(I.jsxs)(N.a,{component:"div",color:"textSecondary",children:[Object(I.jsx)(O.a,{container:!0,justify:"center",children:Object(I.jsx)(N.a,{style:{fontSize:"5vmin",color:"#eeeeee"},children:e.isPlay?e.isPomodoro?"\u4f5c\u696d\u4e2d":"\u4f11\u61a9\u4e2d":"\u505c\u6b62\u4e2d"})}),Object(I.jsx)(O.a,{container:!0,justify:"center",children:Object(I.jsxs)(N.a,{style:{fontSize:"5vmin",color:"#eeeeee"},children:[e.minute,":",0===Math.floor(e.second/10)?"0"+e.second:e.second]})})]})})},V=n(108),z=Object(j.a)((function(e){return Object(m.a)({progressBottom:{color:e.palette.grey[200]},progressTop:{color:"#aaaaaa",position:"absolute",left:0}})})),F=function(e){var t=z();return Object(I.jsxs)(i.a.Fragment,{children:[Object(I.jsx)(V.a,{size:"50vmin",variant:"determinate",value:100,className:t.progressBottom}),Object(I.jsx)(V.a,{size:"50vmin",variant:"determinate",value:100*(1-(60*e.minute+e.second)/e.initialSec),className:t.progressTop})]})},L=function(e){var t=Object(o.useState)(!0),n=Object(l.a)(t,2),c=n[0],s=n[1],r=Object(o.useState)(!0),a=Object(l.a)(r,2),u=a[0],j=a[1],m=Object(o.useState)(!1),d=Object(l.a)(m,2),b=d[0],f=d[1],g=Object(o.useState)(0),x=Object(l.a)(g,2),v=x[0],h=x[1],y=Object(o.useState)(e.pomodoroTime),T=Object(l.a)(y,2),k=T[0],w=T[1],V=Object(o.useState)(60*k+v),z=Object(l.a)(V,2),L=z[0],U=z[1],A=Object(o.useState)(!1),E=Object(l.a)(A,2),R=E[0],D=E[1];Object(o.useEffect)((function(){u&&(w(e.pomodoroTime),U(60*e.pomodoroTime))}),[e.pomodoroTime]),Object(o.useEffect)((function(){J()}),[e.pomodoroCount]),Object(o.useEffect)((function(){e.usrMusic.volume=e.usrVolume/100}),[e.usrMusic,e.usrVolume]),Object(B.a)((function(){e.usrMusic.pause(),e.usrMusic.currentTime=0,D(!R),e.onMusicChange(c?e.pomodoroMusic:e.breakTimeMusic)}),R?1e4:null);var J=function(){0!==e.pomodoroCount&&e.pomodoroCount%e.longBreakInterval===0?(w(e.longBreakTime),U(60*e.longBreakTime)):u||(w(e.breakTime),U(60*e.breakTime))};Object(B.a)((function(){v<=0?0===k?(c?e.onPomodoroCountChange(e.pomodoroCount):(w(e.pomodoroTime),U(60*e.pomodoroTime)),D(!R),e.usrMusic.play(),s(!c),h(0)):(w((function(e){return e-1})),h(59)):h((function(e){return e-1}))}),b?1e3:null);return Object(I.jsxs)(i.a.Fragment,{children:[Object(I.jsx)(O.a,{container:!0,alignItems:"center",justify:"center",style:{marginBottom:"20px"},children:Object(I.jsxs)(p.a,{position:"relative",display:"inline-flex",children:[Object(I.jsx)(F,{minute:k,second:v,initialSec:L}),Object(I.jsx)(P,{isPlay:b,isPomodoro:c,minute:k,second:v})]})}),Object(I.jsxs)(O.a,{container:!0,alignItems:"center",justify:"center",children:[Object(I.jsx)(C.a,{onClick:function(){f(!0),j(!1)},style:{color:"#eeeeee",fontSize:"20vmin",display:b?"none":""}}),Object(I.jsx)(S.a,{onClick:function(){f(!1)},style:{color:"#eeeeee",fontSize:"20vmin",display:b?"":"none"}}),Object(I.jsx)(M.a,{onClick:function(){f(!1),j(!0),w(e.pomodoroTime),h(0),s(!0),U(60*e.pomodoroTime)},style:{color:"#eeeeee",fontSize:"20vmin"}})]}),Object(I.jsx)(O.a,{container:!0,alignItems:"center",justify:"center",children:Object(I.jsxs)(N.a,{style:{fontSize:"3vmin",color:"#eeeeee"},children:["Pomodoro Count : ",e.pomodoroCount]})})]})},U=n(113),A=function(e){return Object(I.jsxs)(b.a,{component:"label",children:[Object(I.jsx)("input",{accept:"audio/*",id:"pomodoro-music",type:"file",style:{display:"none"},onChange:function(t){var n=null!==t.target.files?t.target.files[0]:null;null!==n&&(-1!==n.type.indexOf("audio")?e.onMusicChange(n):alert("\u30aa\u30fc\u30c7\u30a3\u30aa\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u3093\u3067\u304f\u3060\u3055\u3044"))}}),Object(I.jsx)(U.a,{})]})},E=n(119),R=Object(j.a)((function(e){return Object(m.a)({root:{"& > *":{fontSize:"20px",marginTop:"10px",marginBottom:"10px"}}})})),D=function(e){var t=R();return Object(I.jsx)(E.a,{id:"outlined-number",label:e.label,type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:e.time,onChange:function(t){var n=t.target.value;n?Number(n)<=1?e.setTime(1):e.setTime(Math.floor(Number(n))):e.setTime(Number(NaN))},className:t.root})},J=n(122),_=n(115),K=n(116),Q=function(e){return Object(o.useEffect)((function(){(0===e.volume&&!e.isMute||0!==e.volume&&e.isMute)&&e.setIsMute(!e.isMute)}),[e,e.isMute,e.volume]),Object(I.jsxs)(i.a.Fragment,{children:[Object(I.jsx)(N.a,{id:"input-slider",gutterBottom:!0,children:"Volume"}),Object(I.jsxs)(O.a,{container:!0,spacing:2,alignItems:"center",children:[Object(I.jsx)(f.a,{onClick:function(t){e.setVolBeforeMute(e.volume),e.setUsrVolume(0),e.setIsMute(!e.isMute)},style:{display:e.isMute?"none":""},children:Object(I.jsx)(_.a,{})}),Object(I.jsx)(f.a,{onClick:function(t){e.setUsrVolume(e.volBeforeMute),e.setIsMute(!e.isMute)},style:{display:e.isMute?"":"none"},children:Object(I.jsx)(K.a,{})}),Object(I.jsx)(O.a,{item:!0,xs:!0,children:Object(I.jsx)(J.a,{value:e.volume,onChange:function(t,n){e.setUsrVolume(n)},"aria-labelledby":"continuous-slider"})})]})]})},Y=Object(j.a)((function(e){return Object(m.a)({settingBtn:{fontSize:"10vmin"},fadeBox:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"#000",opacity:.5,zIndex:1},resetPomodoro:{paddingTop:"10px"}})})),q=function(){var e=Object(o.useState)(25),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(o.useState)(5),r=Object(l.a)(s,2),j=r[0],m=r[1],v=Object(o.useState)(25),h=Object(l.a)(v,2),y=h[0],C=h[1],S=Object(o.useState)(4),M=Object(l.a)(S,2),N=M[0],B=M[1],w=Object(o.useState)(!1),P=Object(l.a)(w,2),V=P[0],z=P[1],F="./alarmBreak.mp3",U=Object(o.useState)(new Audio(F)),E=Object(l.a)(U,2),R=E[0],J=E[1],_=Object(o.useState)(new Audio(F)),K=Object(l.a)(_,2),q=K[0],G=K[1],H=Object(o.useState)(new Audio(F)),W=Object(l.a)(H,2),X=W[0],Z=W[1],$=Object(o.useState)(100),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],oe=Object(o.useState)(100),ie=Object(l.a)(oe,2),ce=ie[0],se=ie[1],re=Object(o.useState)(!1),ae=Object(l.a)(re,2),ue=ae[0],le=ae[1],je=Object(o.useState)(0),me=Object(l.a)(je,2),de=me[0],be=me[1],Oe=Y();console.log(R),console.log("Yay");var fe=Object(k.useLiveQuery)((function(){return T.settings.count()}));return Object(o.useEffect)((function(){0===fe||T.transaction("r",T.settings,Object(u.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.settings.get({id:1});case 2:t=e.sent,ne((function(){return(null===t||void 0===t?void 0:t.usrVolume)||te})),be((function(){return(null===t||void 0===t?void 0:t.pomodoroCount)||de})),c((function(){return(null===t||void 0===t?void 0:t.pomodoroTime)||n})),m((function(){return(null===t||void 0===t?void 0:t.breakTime)||j})),C((function(){return(null===t||void 0===t?void 0:t.longBreakTime)||y})),B((function(){return(null===t||void 0===t?void 0:t.longBreakInterval)||N})),J((function(){return new Audio(null===t||void 0===t?void 0:t.pomodoroSrc)||R})),G((function(){return new Audio(null===t||void 0===t?void 0:t.breakTimeSrc)||q}));case 11:case"end":return e.stop()}}),e)}))))}),[]),Object(I.jsxs)(i.a.Fragment,{children:[Object(I.jsxs)(d.a,{className:"root",children:[Object(I.jsx)("button",{onClick:function(){console.log("click"),T.transaction("rw",T.settings,(function(){0===fe?T.settings.add({id:1,usrVolume:te,pomodoroCount:de,pomodoroTime:n,breakTime:j,longBreakTime:y,longBreakInterval:N,pomodoroSrc:R.src,breakTimeSrc:q.src}):T.settings.update(1,{id:1,usrVolume:te,pomodoroCount:de,pomodoroTime:n,breakTime:j,longBreakTime:y,longBreakInterval:N,pomodoroSrc:R.src,breakTimeSrc:q.src})})).then((function(){console.log("Success to udpate settings.")})).catch((function(e){alert("Failed to update settings.")}))},children:"Click"}),Object(I.jsx)(x.a,{trigger:Object(I.jsx)(b.a,{style:{color:"#eeeeee",position:"relative",top:0,left:"80%"},children:Object(I.jsx)(g.a,{className:Oe.settingBtn})}),modal:!0,onOpen:function(){z(!0)},onClose:function(){isNaN(n)&&c(1),isNaN(j)&&m(1),isNaN(y)&&C(1),isNaN(N)&&B(1),z(!1)},children:function(e){return Object(I.jsxs)(O.a,{style:{backgroundColor:"#eeeeee",padding:"20px",borderRadius:"10px"},children:[Object(I.jsxs)(O.a,{container:!0,alignItems:"center",justify:"center",children:[Object(I.jsx)(D,{time:n,setTime:c,label:"\u4f5c\u696d\u6642\u9593(min)"}),Object(I.jsx)(A,{onMusicChange:function(e){var t=window.URL.createObjectURL(e);J(new Audio(t))}})]}),Object(I.jsxs)(O.a,{container:!0,alignItems:"center",justify:"center",children:[Object(I.jsx)(D,{time:j,setTime:m,label:"\u4f11\u61a9\u6642\u9593(min)"}),Object(I.jsx)(A,{onMusicChange:function(e){var t=window.URL.createObjectURL(e);G(new Audio(t))}})]}),Object(I.jsx)(O.a,{container:!0,alignItems:"center",justify:"flex-start",children:Object(I.jsx)(D,{time:y,setTime:C,label:"\u9577\u3081\u306e\u4f11\u61a9\u6642\u9593(min)"})}),Object(I.jsx)(O.a,{container:!0,alignItems:"center",justify:"flex-start",children:Object(I.jsx)(D,{time:N,setTime:B,label:"\u9577\u3081\u306e\u4f11\u61a9\u983b\u5ea6"})}),Object(I.jsx)(Q,{volume:te,setUsrVolume:ne,volBeforeMute:ce,setVolBeforeMute:se,isMute:ue,setIsMute:le}),Object(I.jsx)(O.a,{container:!0,alignItems:"center",justify:"center",children:Object(I.jsx)(f.a,{variant:"outlined",onClick:function(){z(!1),e(),isNaN(n)&&c(1),isNaN(j)&&m(1),isNaN(y)&&C(1),isNaN(N)&&B(1)},children:"OK"})}),Object(I.jsx)(O.a,{container:!0,alignItems:"center",justify:"center",className:Oe.resetPomodoro,children:Object(I.jsx)(f.a,{variant:"outlined",onClick:function(){z(!1),e(),be(0)},children:"Reset Pomodoro Count"})})]})}}),Object(I.jsx)(L,{pomodoroTime:n,breakTime:j,longBreakTime:y,longBreakInterval:N,usrMusic:X,pomodoroMusic:R,breakTimeMusic:q,usrVolume:te,onMusicChange:function(e){Z(e)},pomodoroCount:de,onPomodoroCountChange:function(e){be(e+1)}})]}),Object(I.jsx)(p.a,{className:Oe.fadeBox,style:{visibility:V?"visible":"hidden"}})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,124)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),o(e),i(e),c(e),s(e)}))};s.a.render(Object(I.jsx)(i.a.StrictMode,{children:Object(I.jsx)(q,{})}),document.getElementById("root")),G()}},[[76,1,2]]]);
//# sourceMappingURL=main.b14924d9.chunk.js.map